(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{577:function(e,t,a){"use strict";a.r(t);var r=a(78),n=a(50),s=a.n(n),c=a(79),l=a(23),i=a(24),o=a(26),u=a(25),d=a(27),m=a(1),p=a.n(m),h=a(579),f=a(580),b=a(581),g=a(583),k=a(575),U=a(585),E=a(13),v=h.a.Column,y=(h.a.ColumnGroup,f.a.Item),x=b.a.TabPane,w=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).getUser=function(){var e=JSON.stringify({query:"query( $limit:limit,$sort:sort,$search:search ){ GetUser( limit:$limit,sort:$sort,search:$search ) {sortableFields,searchableFields,page { items,pageNo,totalPages },data{id,email,firstname,lastname,middlename,created },success,message { path,message } } }",variables:{limit:{to:6,page:0},sort:{field:"",by:""},search:{by:"",text:""}}});fetch("https://api.8uilder.com",{method:"POST",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("session")},body:e}).then(function(){var e=Object(c.a)(s.a.mark(function e(t){var r,n,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:for(c in r=e.sent,n=r.GetUser.data)n[c].key=c;if(!r.GetUser.success){e.next=9;break}a.setState({getUserData:n}),e.next=10;break;case 9:return e.abrupt("return",!1);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},a.addUser=Object(c.a)(s.a.mark(function e(){var t;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=JSON.stringify({query:"mutation($input:create_user!){ CreateUser( input:$input ) { success,message { path,message } } }",variables:{input:{email:a.state.addUserEmail,firstname:a.state.addUserFirstname,middlename:a.state.addUserLastname,lastname:a.state.addUserMiddlename}}}),e.next=3,fetch("https://api.8uilder.com",{method:"POST",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("session")},body:t}).then(function(){var e=Object(c.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,console.log("addUser: ",a),!a.CreateUser.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)})),a.blockUser=function(){var e=Object(c.a)(s.a.mark(function e(t){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,r=JSON.stringify({query:"mutation($input:String!){ blockUser( input:$input ) { success,message { path,message } } }",variables:{input:a}}),e.next=4,fetch("https://api.8uilder.com",{method:"POST",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("session")},body:r}).then(function(){var e=Object(c.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,console.log("deleteUser: ",a),!a.blockUser.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.unblockUser=function(){var e=Object(c.a)(s.a.mark(function e(t){var a,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t,r=JSON.stringify({query:"mutation($input:String!){ unblockUser( input:$input ) { success,message { path,message } } }",variables:{input:a}}),e.next=4,fetch("https://api.8uilder.com",{method:"POST",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("session")},body:r}).then(function(){var e=Object(c.a)(s.a.mark(function e(t){var a;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:if(a=e.sent,console.log("deleteUser: ",a),!a.unblockUser.success){e.next=8;break}return e.abrupt("return",!0);case 8:return e.abrupt("return",!1);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}());case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.success=function(){g.a.success({title:"Success",maskClosable:"false"})},a.openAddUserModal=function(){a.setState({addUserVisible:!0})},a.closeAddUserModal=function(){a.setState({addUserVisible:!1})},a.addUserModal=Object(c.a)(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.addUser();case 2:if(!e.sent){e.next=13;break}return a.success(),e.next=6,document.getElementsByClassName("addUserInput");case 6:for(t=e.sent,r=0;r<t.length;r++)t[r].children[1].value="";console.log(t),a.setState({addUserVisible:!1}),a.getUser(),e.next=14;break;case 13:g.a.error({title:"This is an error message",maskClosable:"false"});case 14:case"end":return e.stop()}},e,this)})),a.blockUserModal=function(){var e=Object(c.a)(s.a.mark(function e(t){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,a.blockUser(r.id);case 3:if(!e.sent){e.next=8;break}a.success(),a.getUser(),e.next=9;break;case 8:g.a.error({title:"This is an error message",maskClosable:"false"});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.unblockUserModal=function(){var e=Object(c.a)(s.a.mark(function e(t){var r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=t,e.next=3,a.unblockUser(r.id);case 3:if(!e.sent){e.next=8;break}a.success(),a.getBlockedUser(),e.next=9;break;case 8:g.a.error({title:"This is an error message",maskClosable:"false"});case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.getBlockedUser=function(){var e=JSON.stringify({query:"query( $limit:limit,$sort:sort,$search:search ){ GetBlockUser( limit:$limit,sort:$sort,search:$search ) {sortableFields,searchableFields,page { items,pageNo,totalPages },data{id,email,firstname,lastname,middlename,created },success,message { path,message } } }",variables:{limit:{to:100,page:1},sort:{field:"",by:""},search:{by:"",text:""}}});fetch("https://api.8uilder.com",{method:"POST",headers:{"Content-Type":"application/json",Authorization:window.localStorage.getItem("session")},body:e}).then(function(){var e=Object(c.a)(s.a.mark(function e(t){var r,n,c;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:for(c in r=e.sent,n=r.GetBlockUser.data)n[c].key=c;if(!r.GetBlockUser.success){e.next=10;break}a.setState({getBlockedUser:n}),console.log("getBlockedUser: ",a.state.getBlockedUser),e.next=11;break;case 10:return e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())},a.onChange=function(e){a.setState(Object(r.a)({},e.target.name,e.target.value))},a.callback=function(e){console.log(e),1==e?a.getUser():a.getBlockedUser()},a.checkRecord=function(e){},a.state={getUserData:[],getBlockedUser:[],addUserVisible:!1,addUserEmail:null,addUserFirstname:null,addUserMiddlename:null,addUserLastname:null},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentWillMount",value:function(){this.getUser(),this.getBlockedUser()}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"user"},p.a.createElement(b.a,{defaultActiveKey:"1",onChange:function(t){return e.callback(t)}},p.a.createElement(x,{tab:"Users",key:"1"},p.a.createElement("div",{className:"Table"},p.a.createElement("h1",null,"Users"),p.a.createElement("div",{className:"row",style:{marginBottom:"10px"}},p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"},p.a.createElement("button",{className:"btn btn-sm btn-primary",style:{float:"right"},onClick:this.openAddUserModal},"Add User"))),p.a.createElement(h.a,{dataSource:this.state.getUserData},p.a.createElement(v,{title:"Date Created",dataIndex:"created"}),p.a.createElement(v,{title:"Email",dataIndex:"email"}),p.a.createElement(v,{title:"Firstname",dataIndex:"firstname"}),p.a.createElement(v,{title:"Lastname",dataIndex:"lastname"}),p.a.createElement(v,{title:"Middlename",dataIndex:"middlename",onCell:function(t){return e.checkRecord(t)}}),p.a.createElement(v,{title:"Action",key:"action",render:function(t,a){return p.a.createElement("span",null,p.a.createElement("a",{href:"#",onClick:function(){return e.blockUserModal(a)}},"Edit"),p.a.createElement(k.a,{type:"vertical"}),p.a.createElement("a",{href:"#",onClick:function(){return e.blockUserModal(a)}},"Block"),p.a.createElement(k.a,{type:"vertical"}),p.a.createElement("a",{href:"#",onClick:function(){return e.blockUserModal(a)}},"View"))}}))),p.a.createElement("div",{className:"Modal"},p.a.createElement(g.a,{title:"Add Users",visible:this.state.addUserVisible,onOk:this.addUserModal,onCancel:this.closeAddUserModal,maskClosable:!1},p.a.createElement("div",null,p.a.createElement(f.a,{className:"login-form"},p.a.createElement(y,null,p.a.createElement(U.a,{prefix:p.a.createElement(E.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Email",className:"addUserInput",onChange:this.onChange,name:"addUserEmail"})),p.a.createElement(y,null,p.a.createElement(U.a,{prefix:p.a.createElement(E.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Firstname",className:"addUserInput",onChange:this.onChange,name:"addUserFirstname"})),p.a.createElement(y,null,p.a.createElement(U.a,{prefix:p.a.createElement(E.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Middlename",className:"addUserInput",onChange:this.onChange,name:"addUserMiddlename"})),p.a.createElement(y,null,p.a.createElement(U.a,{prefix:p.a.createElement(E.a,{type:"key",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"Lastname",className:"addUserInput",onChange:this.onChange,name:"addUserLastname"}))))))),p.a.createElement(x,{tab:"Block Users",key:"2"},p.a.createElement("div",{className:"Table"},p.a.createElement("h1",null,"Blocked Users"),p.a.createElement("div",{className:"row",style:{marginBottom:"10px"}},p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"}),p.a.createElement("div",{className:"col-sm-3"})),p.a.createElement(h.a,{dataSource:this.state.getBlockedUser},p.a.createElement(v,{title:"Date Created",dataIndex:"created"}),p.a.createElement(v,{title:"Email",dataIndex:"email"}),p.a.createElement(v,{title:"Firstname",dataIndex:"firstname"}),p.a.createElement(v,{title:"Lastname",dataIndex:"lastname"}),p.a.createElement(v,{title:"Middlename",dataIndex:"middlename"}),p.a.createElement(v,{title:"Action",key:"action",render:function(t,a){return p.a.createElement("span",null,p.a.createElement("a",{href:"#",onClick:function(){return e.unblockUserModal(a)}},"Unblock"))}}))))))}}]),t}(m.Component);t.default=w}}]);
//# sourceMappingURL=8.d5b34ba0.chunk.js.map